import{_ as e,i as a,f as s,g as l,h as r,j as t,k as o,c as u,l as d,e as n,w as i,u as m,F as p,r as f,o as c,m as g,n as _,p as x,d as y,q as v,s as w,v as b,t as h,x as k,y as V,z as R,A as q}from"./index.d9fdc861.js";const j=(e=>(k("data-v-56fe32a7"),e=e(),V(),e))((()=>d("div",{class:"bg"},null,-1))),C={class:"submitGroup"},U=e({__name:"index",setup(e){let{base:k,router:V}=a(),U=s(),z=s({username:"admin",password:"123456"}),A=l({username:[{required:!0,message:"用户名不能为空",trigger:"blur"},{min:5,max:20,message:"字数要在5-20之间",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"},{min:5,max:20,message:"字数要在5-20之间",trigger:"blur"}]}),F=s(!1),G=s(!1),I=async e=>{await e.validate((e=>{e&&(G.value=!0,R(z.value).then((async e=>{k.setToken(e.data),q("token",e.data),await k.getRoutes(),V.replace({path:"/"}),G.value=!1})))}))};return r((()=>{V.getRoutes().length>t(o).length&&V.removeRoute("layout")})),(e,a)=>{const s=f("el-input"),l=f("el-form-item"),r=f("el-icon"),t=f("el-button"),o=f("el-form");return c(),u(p,null,[j,d("div",C,[n(o,{ref_key:"formRef",ref:U,model:m(z),rules:m(A),"status-icon":""},{default:i((()=>[n(l,{prop:"username"},{default:i((()=>[n(s,{modelValue:m(z).username,"onUpdate:modelValue":a[0]||(a[0]=e=>m(z).username=e),"prefix-icon":m(g),placeholder:"请输入账号"},null,8,["modelValue","prefix-icon"])])),_:1}),n(l,{prop:"password"},{default:i((()=>[n(s,{modelValue:m(z).password,"onUpdate:modelValue":a[2]||(a[2]=e=>m(z).password=e),"prefix-icon":m(_),placeholder:"请输入密码",type:m(F)?"text":"password"},{suffix:i((()=>[n(r,{onClick:a[1]||(a[1]=e=>x(F)?F.value=!m(F):F=!m(F)),class:"el-input__icon"},{default:i((()=>[m(F)?w("",!0):(c(),y(m(v),{key:0})),m(F)?(c(),y(m(b),{key:1})):w("",!0)])),_:1})])),_:1},8,["modelValue","prefix-icon","type"])])),_:1}),n(l,null,{default:i((()=>[n(t,{type:"primary",onClick:a[3]||(a[3]=e=>m(I)(m(U))),style:{width:"100%"},round:"",loading:m(G)},{default:i((()=>[h("登录")])),_:1},8,["loading"])])),_:1})])),_:1},8,["model","rules"])])],64)}}},[["__scopeId","data-v-56fe32a7"]]);export{U as default};
